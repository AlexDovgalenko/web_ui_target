{% extends "base.html" %}

{% block content %}
{% if is_logged_in %}
    <div class="articles-container">
        {% set view_mode = request.args.get('view', 'full') %}
        
        {% if search_query %}
            <h2>Search Results for "{{ search_query }}"</h2>
            {% if articles %}
                <p>Found {{ articles|length }} article(s) - <span class="view-indicator">{{ view_mode.title() }} view</span></p>
            {% else %}
                <p>No articles found matching your search.</p>
            {% endif %}
        {% else %}
            <h2>Programming Articles <span class="view-indicator">- {{ view_mode.title() }} View</span></h2>
        {% endif %}
        
        {% if articles %}
            <div class="articles-grid {% if view_mode == 'compact' %}articles-grid-compact{% endif %}">
                {% for article in articles %}
                    <article class="article-card {% if view_mode == 'compact' %}article-card-compact{% endif %}">
                        <h3>{{ article.title }}</h3>
                        {% if view_mode == 'full' %}
                            <p class="article-content">{{ article.content }}</p>
                        {% endif %}
                    </article>
                {% endfor %}
            </div>
        {% endif %}
    </div>
{% else %}
    <div class="welcome-container">
        <h2>Welcome to Programming Articles</h2>
        <p>Please log in to view our collection of programming articles.</p>
        <div class="welcome-actions">
            <a href="{{ url_for('login') }}" class="btn btn-primary">Log In</a>
            <a href="{{ url_for('signup') }}" class="btn btn-secondary">Sign Up</a>
        </div>
    </div>
{% endif %}
{% endblock %}